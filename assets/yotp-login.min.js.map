{"version":3,"file":"yotp-login.min.js","sources":["yotp-login.js"],"sourcesContent":["/** global: yotpSettings */\n(function(){\n\tfunction callback() {\n\t\tvar $         = document.getElementById.bind(document);\n\t\tvar submit    = $('wp-submit');\n\t\tvar container = $('yotp-block');\n\t\tvar input     = $('yotp');\n\t\tvar login     = $('user_login');\n\n\t\tsubmit.addEventListener('click', yotpCallback);\n\t\tcontainer.setAttribute('hidden', '');\n\t\tinput.setAttribute('disabled', '');\n\n\t\tfunction loginChangeCallback(e)\n\t\t{\n\t\t\tsubmit.addEventListener('click', yotpCallback);\n\t\t\tlogin.removeEventListener('change', loginChangeCallback);\n\t\t}\n\n\t\tfunction yotpCallback(e)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tvar username = login.value;\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsubmit.removeEventListener('click', yotpCallback);\n\t\t\tlogin.addEventListener('change', loginChangeCallback);\n\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\treq.addEventListener('load', function() {\n\t\t\t\tvar r = (typeof this.response === \"string\") ? JSON.parse(this.response) : this.response;\n\t\t\t\tif (null === r || this.status !== 200 || !r.status) {\n\t\t\t\t\tinput.setAttribute('disabled', '');\n\t\t\t\t\tcontainer.setAttribute('hidden', '');\n\t\t\t\t\tsubmit.click();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tinput.removeAttribute('disabled');\n\t\t\t\tcontainer.removeAttribute('hidden');\n\t\t\t\tinput.focus();\n\t\t\t});\n\n\t\t\treq.open('POST', yotpSettings.ajaxurl);\n\t\t\treq.responseType = 'json';\n\t\t\treq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\t\t\treq.send('action=yotp-check&l=' + encodeURIComponent(username));\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', callback);\n\t}\n\telse {\n\t\tcallback();\n\t}\n})();\n"],"names":["callback","$","document","getElementById","bind","submit","container","input","login","loginChangeCallback","e","addEventListener","yotpCallback","removeEventListener","preventDefault","stopPropagation","stopImmediatePropagation","username","value","req","XMLHttpRequest","r","this","response","JSON","parse","status","setAttribute","click","removeAttribute","focus","open","yotpSettings","ajaxurl","responseType","setRequestHeader","send","encodeURIComponent","readyState"],"mappings":"CACA,WACC,SAASA,IACR,IAAIC,EAAYC,SAASC,eAAeC,KAAKF,UACzCG,EAAYJ,EAAE,aACdK,EAAYL,EAAE,cACdM,EAAYN,EAAE,QACdO,EAAYP,EAAE,cAMlB,SAASQ,EAAoBC,GAE5BL,EAAOM,iBAAiB,QAASC,GACjCJ,EAAMK,oBAAoB,SAAUJ,EACpC,CAED,SAASG,EAAaF,GAErBA,EAAEI,iBACFJ,EAAEK,kBACFL,EAAEM,2BAEF,IAAIC,EAAWT,EAAMU,MACrB,GAAKD,EAAL,CAIAZ,EAAOQ,oBAAoB,QAASD,GACpCJ,EAAMG,iBAAiB,SAAUF,GAEjC,IAAIU,EAAM,IAAIC,eAmBd,OAlBAD,EAAIR,iBAAiB,QAAQ,WAC5B,IAAIU,EAA8B,iBAAlBC,KAAKC,SAAyBC,KAAKC,MAAMH,KAAKC,UAAYD,KAAKC,SAC/E,GAAI,OAASF,GAAqB,MAAhBC,KAAKI,SAAmBL,EAAEK,OAI3C,OAHAnB,EAAMoB,aAAa,WAAY,IAC/BrB,EAAUqB,aAAa,SAAU,SACjCtB,EAAOuB,QAIRrB,EAAMsB,gBAAgB,YACtBvB,EAAUuB,gBAAgB,UAC1BtB,EAAMuB,OACV,IAEGX,EAAIY,KAAK,OAAQC,aAAaC,SAC9Bd,EAAIe,aAAe,OACnBf,EAAIgB,iBAAiB,eAAgB,qCACrChB,EAAIiB,KAAK,uBAAyBC,mBAAmBpB,KAC9C,CAxBN,CAyBD,CA5CDZ,EAAOM,iBAAiB,QAASC,GACjCN,EAAUqB,aAAa,SAAU,IACjCpB,EAAMoB,aAAa,WAAY,GA2C/B,CAE2B,YAAxBzB,SAASoC,WACZpC,SAASS,iBAAiB,mBAAoBX,GAG9CA,GAED,CA7DD"}